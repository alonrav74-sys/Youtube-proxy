# 🧪 מדריך בדיקות - ChordFinder Pro AI

## 🎯 איך לבדוק שהכל עובד?

---

## ✅ בדיקה 1: טעינה בסיסית

### מה לבדוק?
האם כל הספריות נטענות כראוי.

### צעדים:

1. פתח את `index.html` בדפדפן
2. פתח Console (F12)
3. חפש הודעות:

```
✅ נכון:
🎸 ChordFinder Pro AI loading...
✅ ChordEngine Pro enabled!
✅ ChordFinder Pro AI loaded!

❌ שגיאות:
❌ שגיאה: chord-engine.js לא נטען!
❌ שגיאה: sync-engine.js לא נטען!
```

### אם יש שגיאה:

בדוק ש-3 הקבצים נמצאים באותה תיקייה:
```
index.html
chord-engine.js
chord-engine-pro.js
sync-engine.js
```

---

## ✅ בדיקה 2: מצבי AI

### מה לבדוק?
שכל 3 המצבים עובדים.

### צעדים:

1. טען קובץ אודיו קצר (30 שניות)
2. בחר **Fast** → לחץ "נתח"
3. בדוק שמסיים ב-2-5 שניות
4. רענן דף
5. בחר **Balanced** → לחץ "נתח"
6. בדוק שמסיים ב-5-10 שניות
7. רענן דף
8. בחר **Accurate** → לחץ "נתח"
9. בדוק שמסיים ב-10-15 שניות

### תוצאות צפויות:

| מצב | זמן | אקורדים |
|-----|------|----------|
| Fast | 2-5s | 8-12 |
| Balanced | 5-10s | 10-15 |
| Accurate | 10-15s | 12-18 |

---

## ✅ בדיקה 3: Ensemble Voting

### מה לבדוק?
שה-Voting עובד ומציג סטטיסטיקות.

### צעדים:

1. טען שיר מלא (2-4 דקות)
2. בחר **Balanced**
3. לחץ "נתח"
4. המתן לסיום
5. בדוק שמופיע:

```
✅ חייב להופיע:

1. בדג' "🗳️ XX%" בשורת הבדג'ים
2. קטע "🗳️ סטטיסטיקות Ensemble":
   - Chromagram: X wins
   - Essentia: X wins
   - הסכמה: X/Y
```

### תוצאות טובות:

- **הסכמה: >70%** = מצוין! 🎉
- **הסכמה: 50-70%** = סביר
- **הסכמה: <50%** = שיר מורכב / איכות אודיו נמוכה

---

## ✅ בדיקה 4: Essentia.js

### מה לבדוק?
שEssentia נטען ועובד.

### צעדים:

1. רענן דף (Ctrl+Shift+R)
2. פתח Console (F12)
3. בחר **Balanced** או **Accurate**
4. טען קובץ
5. לחץ "נתח"
6. חפש בConsole:

```
✅ נכון:
🔄 Loading Essentia.js...
📦 Loading Essentia from CDN...
✅ Essentia.js loaded successfully

🗳️ Ensemble voting...
📊 Chromagram: 15 chords
📊 Essentia: 18 chords
✅ Ensemble: 20 chords (14/20 agreements)

❌ שגיאה:
⚠️ Essentia.js not available
⚠️ Essentia failed, using Chromagram only
```

### אם Essentia לא עובד:

1. **בדוק חיבור אינטרנט** (צריך בפעם הראשונה)
2. **נסה דפדפן אחר** (Chrome/Firefox)
3. **בדוק Firewall/Proxy** שלא חוסמים CDN

---

## ✅ בדיקה 5: דיוק הזיהוי

### מה לבדוק?
השוואה בין מצבים.

### צעדים:

1. הורד שיר פשוט עם אקורדים ידועים (למשל: "Let It Be" - Beatles)
2. מצא chord sheet אמיתי באינטרנט
3. נתח בכל 3 המצבים
4. השווה תוצאות:

### דוגמה: "Let It Be" (C major)

**אקורדים אמיתיים:**
```
C  G  Am  F
C  G  F   C
```

**Fast Mode:**
```
C  G  Am  F     ✓✓✓✓
C  G  F   C     ✓✓✓✓
דיוק: 100% 🎉
```

**Balanced Mode:**
```
C  G  Am  Fmaj7  ✓✓✓ (Fmaj7 קרוב ל-F)
C  G  F   C      ✓✓✓✓
דיוק: ~88%
```

**Accurate Mode:**
```
C    G    Am7  Fmaj7
Csus4 G   F    C
דיוק: ~75% (יותר מדי פרטים!)
```

💡 **לקח:** לפעמים Balanced טוב יותר מ-Accurate!

---

## ✅ בדיקה 6: YouTube Integration

### מה לבדוק?
שהחיפוש והורדה עובדים.

### צעדים:

1. לך לטאב "🎬 יוטיוב"
2. הקלד: "Leonard Cohen Hallelujah"
3. לחץ "🔍 חפש"
4. בדוק שמופיעים תוצאות
5. בחר תוצאה
6. לחץ "נתח"
7. בדוק שמופיע: "⏳ Groq Whisper..." (רקע)
8. המתן לזיהוי
9. עבור לטאב "📝 דף נגינה"
10. בדוק שיש תמלול מלא

### תוצאות צפויות:

```
✅ חייב להיות:

1. אודיו מתנגן
2. אקורדים זוהו
3. תמלול מילים מופיע
4. דף נגינה מלא
```

---

## ✅ בדיקה 7: Real-time Sync

### מה לבדוק?
שהאקורדים מופיעים מעל המילים תוך כדי נגינה.

### צעדים:

1. נתח שיר עם יוטיוב (כדי לקבל תמלול)
2. לחץ "🎧 הפעל"
3. עבור לקטע "📝 דף נגינה — זמן אמת"
4. צפה באקורדים מופיעים מעל המילים

### תוצאות צפויות:

```
✅ נכון:
- אקורדים צצים בזמן אמת
- אקורדים מופיעים מעל/בין מילים
- אקורד נוכחי מודגש (צהוב)
- הכל מסונכרן עם השמע

❌ שגיאה:
- אקורדים לא מופיעים
- אקורדים במקום לא נכון
- אין סנכרון עם שמע
```

---

## 🎵 דוגמאות בדיקה

### שיר פשוט: C-Am-F-G

```javascript
// צפוי:
Chromagram: C, Am, F, G     (4 chords)
Essentia:   C, Am, F, G     (4 chords)
הסכמה: 4/4 = 100% ✓
```

### שיר מורכב: Jazz Standards

```javascript
// צפוי:
Chromagram: Cmaj7, Dm7, G7, Cmaj7      (4 chords)
Essentia:   C, Dm7, G7, C              (4 chords)
הסכמה: 2/4 = 50%

// Voting יבחר:
Cmaj7, Dm7, G7, Cmaj7   ← מעדיף Chromagram
```

---

## 📊 טבלת תוצאות

מלא את הטבלה הזו לאחר הבדיקות:

| בדיקה | Fast | Balanced | Accurate |
|-------|------|----------|----------|
| זמן (30s) | __s | __s | __s |
| זמן (3min) | __s | __s | __s |
| אקורדים (30s) | __ | __ | __ |
| אקורדים (3min) | __ | __ | __ |
| הסכמה % | N/A | __% | __% |
| דיוק (סובייקטיבי) | __/10 | __/10 | __/10 |

---

## 🐛 בעיות ידועות

### 1. Essentia לוקח זמן בפעם הראשונה

**תקין!** הורדה מ-CDN.

### 2. אקורדים כפולים

לפעמים:
```
C C Am Am F F G G
```

**פתרון:** התאם "רגישות בס" (slider)

### 3. אקורדים חסרים

בשירים שקטים, אקורדים לא מזוהים.

**פתרון:** הגבר עוצמה לפני העלאה.

### 4. דיוק נמוך בסולמות מינוריים

Balanced/Accurate טובים יותר במינורים.

---

## 🎯 מבחן הלחץ (Stress Test)

### מבחן 1: שיר ארוך (10 דקות)

1. מצא שיר של 10 דקות
2. נסה Fast mode
3. צפוי: סיום תוך 15-20 שניות

### מבחן 2: 5 שירים ברצף

1. טען 5 שירים שונים
2. נתח כל אחד
3. ודא שאין memory leaks (Console)

### מבחן 3: החלף מצבים במהירות

1. טען שיר
2. נתח ב-Fast
3. מיד עבור ל-Balanced ונתח שוב
4. מיד עבור ל-Accurate ונתח שוב
5. ודא שלא קורס

---

## ✅ Checklist סופי

לפני שאתה משתמש בגרסה החדשה, ודא:

- [ ] כל 3 הקבצים נמצאים באותה תיקייה
- [ ] Console לא מראה שגיאות אדומות
- [ ] Fast mode עובד
- [ ] Balanced mode עובד
- [ ] Accurate mode עובד
- [ ] Essentia נטען (בדוק Console)
- [ ] Ensemble stats מופיע
- [ ] YouTube חיפוש עובד
- [ ] Groq Whisper עובד
- [ ] Real-time sync עובד
- [ ] דף נגינה מופיע נכון

---

## 📝 דיווח באגים

אם מצאת באג, שלח:

1. **דפדפן וגרסה** (Chrome 120, Firefox 115, etc.)
2. **מערכת הפעלה** (Windows 11, macOS Sonoma, etc.)
3. **קובץ לדוגמה** (אם אפשר)
4. **צילום מסך Console** (F12)
5. **תיאור הבעיה**:
   - מה עשית?
   - מה ציפית?
   - מה קרה?

---

## 🎓 טיפים לבדיקה

### 1. השתמש בשירים פשוטים בהתחלה

- "Let It Be" - Beatles
- "Hallelujah" - Leonard Cohen
- "Wonderwall" - Oasis

### 2. בדוק בדפדפנים שונים

- Chrome (מומלץ)
- Firefox
- Safari (אם יש Mac)
- Edge

### 3. בדוק ב-Incognito

כדי לוודא שזה לא cache ישן.

### 4. השווה לגרסה הישנה

שמור את הגיבוי ושווה תוצאות!

---

**בהצלחה בבדיקות! 🧪🎸**
